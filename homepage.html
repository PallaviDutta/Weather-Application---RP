<!DOCTYPE html>
<html>
<head>
<title>Richpanel</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"> </script>


<style>
.flex-container {
display: flex;
flex-wrap: wrap;
justify-content: center;
}
.flex-container > div {
background-color: #fff;
width: 100px;
text-align: center;
line-height: 40px;
font-size: 15px;
}
.padding1{
padding: 3%;
}
.padding2{
margin-right: 5%;
}
p { 
margin: 0px;
padding: 0px;
}
.mt{
margin-top: -20px;
}
.box-color{
background-color: #F0F8FF;
width: 30%;
height:100%;
}
.SubmitBtn {
background: transparent;
}
</style>

</head>
<body>

    <div class="padding1 text-center">
        <form class="form-inline">
            <div class="input-group">
                <span class="glyphicon glyphicon-map-marker" style="position: absolute; z-index: 999; left: 8px; top: 10px;"></span>
                <input id="CityTextBox" type="name" class="form-control CityTextBox" style="border-radius:10px; padding-left: 30px;" size="50" placeholder="Enter City" required>
                <div class="input-group-btn">
                    <button type="button" class="btn SubmitBtn" style="margin-left: -43px; z-index: 10000;"><span class="glyphicon glyphicon-search"></span></button>
                </div>
                </input>
            </div>
        </form>
    </div>

<div class="flex-container">
<div class="padding2">
<p class="mt"><strong>Fri</strong></p>
<p id="TempDay1" class="mt"><span>28</span><span>&#xb0</span><span > 19</span><span>&#xb0</span></p>
<p class="mt"><img src="img/sunny.png"></p>
<p class="mt">Sunny</p>
</div>
<div class="padding2">
<p class="mt"><strong>Sat</strong></p>
<p id="TempDay2" class="mt"><span>29</span><span>&#xb0</span><span > 21</span><span>&#xb0</span></p>
<p class="mt"><img src="img/sunny.png"></p>
<p class="mt">Sunny</p>
</div>
<div class="padding2">
<p class="mt"><strong>Sun</strong></p>
<p id="TempDay3" class="mt"><span>29</span><span>&#xb0</span><span > 21</span><span>&#xb0</span></p>
<p class="mt"><img src="img/cloudy.png"></p>
<p class="mt">Cloudy</p>
</div>  
<div class="padding2">
<p class="mt"><strong>Mon</strong></p>
<p id="TempDay4" class="mt"><span>30</span><span>&#xb0</span><span > 20</span><span>&#xb0</span></p>
<p class="mt"><img src="img/sunny.png"></p>
<p class="mt">Sunny</p>
</div>
<div class="padding2">
<p class="mt"><strong>Tue</strong></p>
<p id="TempDay5" class="mt"><span>31</span><span>&#xb0</span><span > 2</span><span>&#xb0</span></p>
<p class="mt"><img src="img/rain.png"></p>
<p class="mt">Rain</p>
</div>
</div>

<br><br>


<div class="container-fluid text-center bg-grey mt">
<div class="row text-center">
<div class="col-sm-12">
		<h1>
		<span id="Temp">26</span>
	    <span>&#8451</span>
	    <span><img src="img/sunny.png"></span>
	    </h1><br><br>
<div class="col-sm-6">
<!-- 	<p>Graph-time-dependent</p> -->
	<div id="chartContainer" style="height: 200px; max-width: 900px; margin: 0px auto;"></div>
</div>
<div class="col-sm-6" style="padding-left: 10%;">
<div class="col-sm-3 box-color" style="margin-right: 10%;">
 <p><strong>Pressure</strong></p>
 <span id="Pressure">1013</span><span> hpa</span>
</div>
<div class="col-sm-3 box-color">
 <p><strong>Humidity</strong></p>
<span id="Humidity">93</span><span> %</span>
</div>
</div>
</div>
</div>
</div>

<div class="container-fluid text-center bg-grey" style="padding-top: 5%">
<div class="row text-center">
<div class="col-sm-12">
<div class="col-sm-6">
  <div class="col-sm-3">
 <p><strong>Sunrise</strong></p>
<span id="Sunrise">7:22</span><span>am</span>
</div>
<div class="col-sm-3">
 <p><strong>Sunset</strong></p>
 <span id="Sunset">6:12</span><span>pm</span>
</div>
</div>
<div class="col-sm-6">
	<p>Graph-sun-dependent</p>
</div>
</div>
</div>
</div>
<br><br><br>



</body>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
<script>

// Weather of Today Start of SubmitBtn
$(".SubmitBtn" ).click(function() {
var apiurl = 'http://api.openweathermap.org/data/2.5/weather?q=';
// var city = 'Mumbai';
var apiKey = '&APPID=f28e3325378a88306afe2af4f9631615';
var units = '&units=metric';
 
// Weather Today

$.ajax({
  url: apiurl + $(".CityTextBox").val() + apiKey + units,
  // contentType: "application/json",
  // dataType: 'json',
  success: function(result){
    // $('#result').html(res)
    // console.log(result)
    // console.log(result.main)
    // console.log(result.main.humidity)


    $("#Temp").text(result.main.temp)
    $("#Pressure").text(result.main.pressure)
    $("#Humidity").text(result.main.humidity)
    $("#Sunrise").text(result.sys.sunrise)
    $("Sunset").text(result.sys.sunset)

  }
})


// 5 days weather api
var apiurl1 = 'http://api.openweathermap.org/data/2.5/forecast?q=';

$.ajax({
  url: apiurl1 + $(".CityTextBox").val() + apiKey + units,
  success: function(result){
    // console.log(result)
    // console.log(result.main)
    // console.log(result.main.humidity)

    var count=0;
    for (var i = 0; i < result.list.length; i++) {
    var counter = result.list[i];
    if(counter.dt_txt.includes("09:00:00"))
    {
    	count++;
    	var temp = counter.main.temp;
        // console.log(temp);
        console.log(count);
        if(count==1){
        $("#TempDay1").text(temp)
        }
        if(count==2){
        $("#TempDay2").text(temp)
        }
        if(count==3){
        $("#TempDay3").text(temp)
        }
        if(count==4){
        $("#TempDay4").text(temp)
        }
        if(count==5){
        $("#TempDay5").text(temp)
        }
    }}
  }
})


});

// End of SubmitBtn

// Temp vs time graph
window.onload = function () {
var chart = new CanvasJS.Chart("chartContainer", {
	theme: "light2", // "light2", "dark1", "dark2"
	animationEnabled: true, // change to true		
	title:{
		text: " "
	},
	data: [
	{
		// Change type to "bar", "area", "spline", "pie",etc.
		type: "spline",
		dataPoints: [
			{ label: "21°", y: 10  },
			{ label: "22°", y: 15  },
			{ label: "24°", y: 25  },
			{ label: "25°", y: 30  },
			{ label: "29°", y: 28  },
			{ label: "28°", y: 28  },
		]
	}
	]
});
chart.render();

}

</script>

</html>